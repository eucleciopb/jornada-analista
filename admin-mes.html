<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin - Agenda do Mês</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>

<body class="bg">

<header class="topbar">
  <div class="topbar-left">
    <h2>Admin - Agenda do Mês</h2>
    <div id="userInfo" class="hint">Carregando...</div>
  </div>

  <div class="topbar-right">
    <!-- ✅ Fallback nativo: funciona MESMO se JS quebrar -->
    <button class="btn-secondary" type="button" onclick="window.location.href='./admin-menu.html'">Voltar ao Menu</button>
    <button class="btn-secondary" type="button" onclick="window.location.href='./index.html'">Sair</button>
  </div>
</header>

<main class="card wide">
  <section class="row-between">
    <div>
      <h3>Resumo geral (todos os analistas)</h3>
      <p class="hint">Visão mensal administrativa.</p>
    </div>
  </section>

  <hr class="sep" />

  <!-- ✅ Sinal de vida do JS -->
  <div id="boot" class="msg" style="color:#b91c1c;font-weight:900;">
    JS ainda não iniciou...
  </div>

  <div id="msg" class="msg">—</div>

  <div class="grid-3">
    <div>
      <label class="lbl">Mês</label>
      <input id="inpMes" type="month" />
      <div id="lblPeriodo" class="hint" style="margin-top:6px;"></div>
    </div>

    <div>
      <label class="lbl">Filtro CD</label>
      <input id="inpFiltroCD" placeholder="Digite parte do CD..." />
    </div>

    <div>
      <label class="lbl">Filtro Analista</label>
      <input id="inpFiltroAnalista" placeholder="Digite nome ou e-mail..." />
    </div>
  </div>

  <div class="row" style="gap:10px; margin-top:14px; flex-wrap:wrap;">
    <button id="btnCarregar" type="button" class="btn-primary">Carregar mês</button>
    <button id="btnLimpar" type="button" class="btn-secondary">Limpar filtros</button>
  </div>

  <hr class="sep" />

  <section>
    <h3>Resumo por Analista e CD</h3>
    <div class="table-wrap">
      <table class="table table-sticky">
        <thead>
          <tr>
            <th style="width:260px;">Analista</th>
            <th style="width:260px;">CD</th>
            <th style="width:90px;">Dias</th>
            <th>Datas</th>
          </tr>
        </thead>
        <tbody id="tbodyResumo">
          <tr><td colspan="4" class="muted">Aguardando carregar.</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <hr class="sep" />

  <section>
    <h3>Detalhado</h3>
    <div class="table-wrap">
      <table class="table table-sticky">
        <thead>
          <tr>
            <th style="width:120px;">Data</th>
            <th style="width:260px;">Analista</th>
            <th style="width:220px;">CD</th>
            <th style="width:220px;">Atividade</th>
            <th>Observações</th>
          </tr>
        </thead>
        <tbody id="tbodyDet">
          <tr><td colspan="5" class="muted">Aguardando carregar.</td></tr>
        </tbody>
      </table>
    </div>
  </section>
</main>

<script type="module" src="./js/admin_mes.js"></script>
</body>
</html>